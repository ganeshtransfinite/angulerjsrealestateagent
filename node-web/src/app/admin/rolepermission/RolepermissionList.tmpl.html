
<div ng-controller="RolepermissionTableController as vm">
    <div flex layout="row" >
        <div flex-gt-lg="15" ng-show="!vm.filterclose && role['Role Permission'].Filter && vm.showmenu === true"     >
            <md-toolbar >
                <div class="md-toolbar-tools">
                    <h2>
                        Filter
                    </h2>
                    <md-menu>
                        <md-button class="md-icon-button" aria-label="open menu" ng-click="$mdOpenMenu()">
                            <md-icon md-font-icon="zmdi zmdi-more-vert"></md-icon>
                        </md-button>
                        <md-menu-content >

                            <md-menu-item>
                                <md-button  >
                                    <md-checkbox ng-init="vm.showmenu = true;adminrolepermission.selectlistbox.rolepermissionroleid = true;" ng-model="adminrolepermission.selectlistbox.rolepermissionroleid"    ></md-checkbox>    
                                    <div class="md-body-2"  >
                                        {{'adminmenu.rolepermission.GRID.roleid'| translate}} 
                                    </div>
                                </md-button>
                            </md-menu-item>         
                            <md-menu-divider></md-menu-divider>
                        </md-menu-content>
                    </md-menu>
                    <span flex>                                 
                        <md-button    ng-click="vm.getTable()"     class="md-fab md-mini" aria-label="Add">
                            <md-icon md-font-icon="zmdi zmdi-refresh"></md-icon> <md-tooltip>Refresh</md-tooltip>
                        </md-button>
                    </span>
                </div>
            </md-toolbar>
            <md-content flex layout="column"  class="filter-content"  >
                <md-content flex='100' layout="column">
                    <md-list flex='100' class="filter-list" >

                        <div ng-show="adminrolepermission.selectlistbox.rolepermissionroleid" layout="column"  flex>
                            <md-subheader  class="md-primary" style="background-color: {{sessionobject.getPlaletColor(adminrolepermission.selectrolepermissionroleidtbl)}}" 
                                           >   <md-icon ng-click="adminrolepermission.selectlistbox.rolepermissionroleid = false"  md-font-icon="zmdi zmdi-close-circle" ></md-icon> &nbsp; {{'adminmenu.rolepermission.GRID.roleid'| translate}} </md-subheader>
                            <md-list   ng-model="adminrolepermission.selectrolepermissionroleidtbl"   name="rolepermissionroleid" id="rolepermissionroleid" flex="100">
                                <md-list-item ng-show="$index < sessionobject.getPlaletCount(adminrolepermission.selectlistbox) || selectrolepermissionroleidtblflag" ng-repeat="objcombo in sessionobject.comboboxlist.rolepermissionroleidcntlist" style="height: 8px">
                                    <md-checkbox class="md-primary" ng-model="adminrolepermission.selectrolepermissionroleidtbl[objcombo.id]"  aria-label="Primary Checkbox" flex="100">
                                        {{objcombo.text}}  ( {{objcombo.count}} )
                                    </md-checkbox>  
                                </md-list-item>                                
                            </md-list>
                            <md-button flex  layout="row"  layout-align="end" class="md-primary md-raised demo-dialog-open-button"
                                       ng-show="!selectrolepermissionroleidtblflag"  layout="row" ng-click="selectrolepermissionroleidtblflag = true"  layout-align="end center" >
                                <md-icon  md-font-icon="zmdi zmdi-triangle-down" ></md-icon>
                            </md-button>
                            <md-button flex  layout="row"  layout-align="end" class="md-primary md-raised demo-dialog-open-button"
                                       ng-show="selectrolepermissionroleidtblflag"  layout="row" ng-click="selectrolepermissionroleidtblflag = false"  layout-align="end center" >
                                <md-icon  md-font-icon="zmdi zmdi-triangle-up" ></md-icon>
                            </md-button>
                            <md-divider></md-divider>
                        </div>
                    </md-list>
                </md-content>
            </md-content>
        </div>
        <div class="md-whiteframe-z5 animate-wrapper" layout="column" layout-align="start start" flex>
            <div flex id="ui-admin-email" ui-view layout="column" layout-align="start stretch" class="overflow-auto full-width">
                <div flex class="inbox-no-email-selected" layout="column" layout-align="center" >
                    <md-toolbar  layout="row" layout-align="space-between center"  class="padding-bottom-10 padding-left-10 padding-top-10  padding-right-10">
                        <div>
                            <div  layout='row' layout-align="start" >
                                <md-button    ng-click="vm.filterclose = false"   ng-show="role['Role Permission'].Filter && vm.filterclose && vm.showmenu === true"   class="md-fab md-mini" aria-label="Close">
                                      <md-icon md-font-icon="fa fa-sign-in" ></md-icon>  <md-tooltip>Close Filter</md-tooltip>
                                </md-button>
                                <md-button    ng-click="vm.filterclose = true"  ng-show="role['Role Permission'].Filter && !vm.filterclose && vm.showmenu === true"   class="md-fab md-mini" aria-label="Open">
                                    <md-icon md-font-icon="fa fa-sign-out"></md-icon> <md-tooltip> Open Filter </md-tooltip>
                                </md-button>
                                <md-button    ng-click="addTodo($event)"   ng-show="role['Role Permission'].Add"  class="md-fab md-mini" aria-label="Add">
                                    <md-icon md-font-icon="fa fa-plus"></md-icon> <md-tooltip> Add </md-tooltip>
                                </md-button>
                                <md-button    ng-show="role['Role Permission'].Edit"
                                              ng-click="vm.object.editTodo($event)"   class="md-fab md-mini" aria-label="Edit">
                                    <md-icon md-font-icon="fa fa-edit"></md-icon> <md-tooltip> Edit </md-tooltip>
                                </md-button>
                                <md-button     ng-show="role['Role Permission'].Delete"  class="md-fab md-mini" ng-click="vm.object.removeTodo($event)"    class="md-fab md-mini" aria-label="Delete">
                                    <md-icon md-font-icon="zmdi zmdi-delete"></md-icon> <md-tooltip> Delete </md-tooltip>
                                </md-button>
                            </div>
                        </div>
                        <div ng-show="role['Role Permission'].Export">
                            {{'ADMIN.TOOLBAR.EXPORTDATA'| translate}}   
                            <md-menu>
                                <md-button class="md-icon-button" aria-label="{{'ADMIN.TOOLBAR.EXPORTDATA'| translate}} " ng-click="$mdOpenMenu()">
                                    <md-icon md-font-icon="zmdi zmdi-more-vert"> </md-icon>
                                </md-button>
                                <md-menu-content >
                                    <md-menu-item >
                                        <md-button  ng-click="sessionobject.tableExport({type: 'excel', escape: 'false'});" >
                                            <md-icon md-font-icon="fa fa-file-excel-o"> </md-icon>
                                            <div class="md-body-2"  >
                                                {{'ADMIN.TOOLBAR.EXCEL'| translate}} 
                                            </div>
                                        </md-button>
                                    </md-menu-item>
                                    <md-menu-item >
                                        <md-button  ng-click="sessionobject.tableExport({type: 'xml', escape: 'false'});" >
                                            <md-icon md-font-icon="fa fa-file-o"> </md-icon>
                                            <div class="md-body-2"  >
                                                {{'ADMIN.TOOLBAR.xml'| translate}} 
                                            </div>
                                        </md-button>
                                    </md-menu-item >
                                    <md-menu-item >
                                        <md-button  ng-click="sessionobject.tableExport({type: 'csv', escape: 'false'});" >
                                            <md-icon md-font-icon="fa fa-file-text-o"> </md-icon>
                                            <div class="md-body-2"  >
                                                {{'ADMIN.TOOLBAR.csv'| translate}} 
                                            </div>
                                        </md-button>
                                    </md-menu-item >
                                    <md-menu-divider></md-menu-divider>
                                    <md-menu-item >
                                        <md-button  ng-click="sessionobject.printIt('printArea1')" >
                                            <md-icon md-font-icon="fa fa-print"> </md-icon>
                                            <div class="md-body-2"  >
                                                {{'ADMIN.TOOLBAR.Print'| translate}} 
                                            </div>
                                        </md-button>
                                    </md-menu-item >
                                </md-menu-content>
                            </md-menu>
                        </div>
                    </md-toolbar>
                    <md-divider></md-divider>
                    <md-table-pagination  class="page-nav-list md-title"  
                                          md-limit-options="vm.query.limitoption" md-limit="vm.query.limit" md-page-select md-page="vm.query.page" md-total="{{vm.contents.total_count}}" 
                                          md-on-paginate="vm.getTable"></md-table-pagination>
                    <md-divider></md-divider>
                    <md-toolbar class="md-table-toolbar alternate" ng-show="vm.selected.length" ng-show="role['Role Permission'].Grid">
                        <div class="md-toolbar-tools" layout-align="start center">
                            <div>{{vm.selected.length}} {{vm.selected.length > 1 ? 'users' : 'user'}} selected</div>
                        </div>
                    </md-toolbar>
                    <md-table-container flex="grow"    ng-show="role['Role Permission'].Grid"  id="printArea1"  class="md-tablegrid-container overflow-auto full-width">
                        <table fixed-header md-table class="md-primary md-tablegrid" id="printArea" md-row-select ng-model="vm.selected" 
                               multiple id="tabledata"   md-progress="vm.promise">
                            <thead  md-head md-order="vm.query.order" md-on-reorder="vm.getTable">
                                <tr md-row>
                                    <th md-column md-order-by="rolepermissionid" >{{vm.columns.rolepermissionid| translate }} </th>
                                    <th md-column md-order-by="roleid.name" >{{vm.columns.roleid| translate }} </th>
                                    <th md-column md-order-by="operationid.name" >{{vm.columns.operationid| translate }} </th>
                                    <th md-column md-order-by="pfunction" ><span translate> Function </span></th>
                                    <th md-column md-order-by="pfunction" >{{vm.columns.pfunction| translate }} </th>
                                    <th md-column md-order-by="recordorder" ng-show="false" >{{vm.columns.recordorder| translate }} </th>
                                </tr>
                            </thead>
                            <tbody md-body>
                                <tr   md-row md-auto-select md-select="rolepermissionobj" ng-repeat="rolepermissionobj in vm.contents.items"  >


                                    <td md-cell>{{::rolepermissionobj.rolepermissionid}}</td>

                                    <td md-cell >  {{ $index !== 0  && vm.contents.items[$index-1].roleid.name ===rolepermissionobj.roleid.name ? '' : rolepermissionobj.roleid.name}}</td>


                                    <td md-cell >  {{ $index !== 0  && vm.contents.items[$index-1].operationid.name ===rolepermissionobj.operationid.name ? '' : rolepermissionobj.operationid.name}}</td>


                                    <td md-cell>{{::rolepermissionobj.operationid.funname}}</td>
                                    <td md-cell><md-switch ng-model="rolepermissionobj.pfunction" ng-disabled="!role['Role Permission'].Edit"  ng-change="vm.getRolepermissionFormColUpdate(rolepermissionobj.rolepermissionid, rolepermissionobj.pfunction, 'pfunction',rolepermissionobj)"> </md-switch></td>


                            </tr>
                            </tbody>
                        </table>
                    </md-table-container>
                    <md-table-pagination    class="page-nav-list md-title"  md-limit-options="vm.query.limitoption"  md-limit="vm.query.limit" md-page-select md-page="vm.query.page" md-total="{{vm.contents.total_count}}" md-on-paginate="vm.getTable"></md-table-pagination>
                    <div>
                        <md-toolbar class="toolbar-default margin-bottom-30">
                            <div class="md-toolbar-tools">
                                <md-button class="md-icon-button" aria-label="Settings">
                                    <md-icon md-font-icon="icon-menu"></md-icon>
                                </md-button>
                                <!--                                sessionobject.printIt('printArea')-->
                                <span flex></span>
                                <div  layout='row' layout-align="start">
                                    <md-button    ng-click="addTodo($event)"   ng-show="role['Role Permission'].Add"  class="md-fab md-mini" aria-label="Add">
                                        <md-icon md-font-icon="fa fa-plus"></md-icon> <md-tooltip> Add </md-tooltip>
                                    </md-button>
                                    <md-button    ng-show="role['Role Permission'].Edit"
                                                  ng-click="vm.object.editTodo($event)"   class="md-fab md-mini" aria-label="Edit">
                                        <md-icon md-font-icon="fa fa-edit"></md-icon> <md-tooltip> Edit </md-tooltip>
                                    </md-button>
                                    <md-button     ng-show="role['Role Permission'].Delete"  class="md-fab md-mini" ng-click="vm.object.removeTodo($event)"    class="md-fab md-mini" aria-label="Delete">
                                        <md-icon md-font-icon="zmdi zmdi-delete"></md-icon> <md-tooltip> Delete </md-tooltip>
                                    </md-button>
                                </div>
                            </div>
                        </md-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div> 
</div>
